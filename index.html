<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Me!!!</title>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .left,
        .right {
            width: 100%;
            margin-bottom: 20px;
            padding: 20px;
        }

        body {
            background: url(./res/bg.jpg) no-repeat center center;
            background-size: cover;
            background-attachment: fixed;
        }

        /* 响应式断点 */
        @media (min-width: 768px) {
            .left,
            .right {
                width: 50%;
                margin-bottom: 0;
            }
        }

        /* 模拟链接样式的按钮 */
        button.media-link {
            background-color: transparent;
            border: none;
            cursor: pointer;
            text-decoration: underline;
            color: blue;
            padding: 0;
        }

        button.media-link:hover {
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="inputBox" placeholder="Type something here..." autofocus>
        <button onclick="sendRequest()">Call Me!</button>
    </div>
    <div class="container">
        <div class="left">
            <h2>Music List</h2>
            <ul onmousedown="handleMediaClick(event)">
                <li><button class="media-link" data-type="audio" data-src="./Music/snow_hrb.mp3">下雪哈尔滨</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/兰亭集序.mp3">兰亭集序</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/晴天.mp3">晴天</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/爱在西元前.mp3">爱在西元前</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/花海.mp3">花海</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/蒲公英的约定.mp3">蒲公英的约定</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/周杰伦 - .搁浅.mp3">搁浅</button></li>
                <li><button class="media-link" data-type="audio" data-src="./Music/周杰伦 - .七里香">七里香</button></li>
            </ul>
        </div>
        <div class="right">
            <h2>Video List</h2>
            <ul onmousedown="handleMediaClick(event)">
                <li><button class="media-link" data-type="video" data-src="./Video/晚风心里吹-阿梨粤.mp4">晚风心里吹</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/青花瓷_周杰伦.mp4">青花瓷</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/蓝莲花_许巍.mp4">蓝莲花</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/幻听_许嵩.mp4">幻听</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/清明雨上_许嵩.mp4">清明雨上</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/素颜_许嵩.mp4">素颜</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/如果当时_许嵩.mp4">如果当时</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/庐州月_许嵩.mp4">庐州月</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/AINY_邓紫棋.mp4">A.I.N.Y</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/追梦赤子心_张韶涵.mp4">追梦赤子心</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/可爱女人_周杰伦.mp4">可爱女人</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/月半小夜曲 _李克勤.mp4">月半小夜曲</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/灌篮高手.mp4">灌篮高手</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/同一种调调.mp4">同一种调调</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/you belong with me.mp4">you belong with me</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/Sister Act- I Will Follow Him.mp4">Sister Act- I Will Follow Him</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/听见下雨的声音.mp4">听见下雨的声音</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/发如雪.mp4">发如雪</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/噔噔噔.mp4">噔噔噔</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/夜曲.mp4">夜曲</button></li>
                <li><button class="media-link" data-type="video" data-src="./Video/一路向北.mp4">一路向北</button></li>
            </ul>
        </div>
    </div>

    <script>
        async function sendRequest() {
            const inputValue = document.getElementById("inputBox").value.trim();
            if (!inputValue) return alert("Please enter a message.");

            const encodedText = encodeURIComponent(inputValue);
            const url = `https://api2.pushdeer.com/message/push?pushkey=PDU26743Tlvsp1tB3H60S8YHbSAAWxAS9TWuWLV7N&text=${encodedText}`;

            if (!isWithinValidTimeframe()) {
                alert("Service unavailable during off-hours or weekends. Please try again later.");
                return;
            }

            try {
                await fetch(url);
                alert("Call request sent successfully!");
                document.getElementById("inputBox").value = "";
            } catch (error) {
                console.error(error);
                alert("An error occurred while sending the call request. Please try again later.");
            }
        }

        function handleMediaClick(event) {
            const target = event.target.closest('button.media-link');
            if (!target) return;

            const mediaType = target.dataset.type;
            const src = target.dataset.src;

            const mediaElement = document.createElement(mediaType === 'audio' ? 'audio' : 'video');
            mediaElement.src = src;
            mediaElement.play();

            event.preventDefault();
        }

        function isWithinValidTimeframe() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const hour = now.getHours();
            const dayOfWeek = now.getDay();

            if (year > 2025 || (year === 2025 && month > 12)) {
                return false;
            }

            if (dayOfWeek === 0 || dayOfWeek === 6 || (hour < 9 || hour >= 21)) {
                return false;
            }

            return true;
        }
    </script>
</body>
</html>
